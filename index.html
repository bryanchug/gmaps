<!DOCTYPE html>
<html>
    <head>
        <title>Google Maps Examples</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
	    <link href="css/bootstrap-responsive.min.css" rel="stylesheet" media="screen">
	    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
	    <script src="js/bootstrap.min.js"></script>
	    <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
	    <script>
		    $(function(){
			    var center = new google.maps.LatLng(8.488189, 124.653727);
			    var map = new google.maps.Map(
				    document.getElementById('map-canvas'), {
					    mapTypeId: google.maps.MapTypeId.ROADMAP,
					    zoom: 15,
					    center: center
				    }
			    );

			    var activeInfoWindow;

			    //Close activeInfoWindow when map is clicked
			    google.maps.event.addListener(map, 'click', function () {
				    if( activeInfoWindow ){
					    activeInfoWindow.close();
				    }
			    });

			    function openInfoWindow(infoWindow, marker) {
				    if( activeInfoWindow ){
					    activeInfoWindow.close();
				    }
				    infoWindow.open(map, marker);
				    activeInfoWindow = infoWindow;
			    }

			    function addPoint(point, name) {
				    var marker = new google.maps.Marker({
					    map:map,
					    position:point,
					    icon:'/img/map-marker.png'
				    });

				    var infoWindow = new google.maps.InfoWindow({
					    content: name
				    });

				    google.maps.event.addListener(marker, 'click', function () {
					    openInfoWindow(infoWindow, marker);
				    });

				    return {marker:marker, infoWindow:infoWindow};
			    }

			    //Map link click handler:
			    $('.map-link').click(function(e){
				    e.preventDefault();
				    
				    var $mapLink = $(this);
				    
				    var latitude = Number( $mapLink.data('latitude') );
				    var longitude = Number( $mapLink.data('longitude') );
				    var point = new google.maps.LatLng( latitude, longitude );
				    map.panTo( point );

				    var marker = $mapLink.data('marker');
				    var infoWindow = $mapLink.data('infoWindow');

				    if( !marker ) {
					    var _addPointResult = addPoint(point, $mapLink.text());
					    marker = _addPointResult.marker;
					    infoWindow = _addPointResult.infoWindow;
				    }

				    if( infoWindow ){
					    openInfoWindow(infoWindow, marker);
				    }

			    });
		    });
	    </script>
	    <style>
		    html, body{
			    height: 100%;
		    }
		    #content{
			    height: 100%;
		    }
		    #side-panel{
			    background: #eee url('img/ticks.png');
			    float: left;
			    width: 20%;
			    height: 100%;
			    min-height: 500px;
		    }
		    .side-panel-content{
			    padding: 0 10px;
		    }
		    #map-panel{
			    background: #eee;
			    float: left;
			    width: 80%;
			    height: 100%;
		    }
		    #map-canvas{
			    width: 100%;
			    height: 100%;
			    min-height: 500px;
		    }
		    #map-canvas img{
			    max-width: none;
		    }
		    .btn{
			    margin: 2px;
		    }
	    </style>
    </head>
    <body>
	    <div class="navbar navbar-inverse navbar-static-top">
		    <div class="navbar-inner">
			    <div class="container">
				    <a class="brand" href="#">Google Maps Examples</a>
			    </div>
		    </div>
	    </div>
	    <div id="content">
		    <div id="side-panel">
			    <div class="side-panel-content">
				    <h3>Instructions</h3>
				    <ul>
					    <li>
						    <a target="_blank" href="https://developers.google.com/maps/documentation/javascript/tutorial">
							    Google Maps JavaScript API v3
						    </a>
					    </li>
					    <li>
						    <a href="#" class="map-link btn btn-danger" data-latitude="8.488189" data-longitude="124.653727">Capitol University</a>
						    <a href="#" class="map-link btn btn-danger" data-latitude="8.485064" data-longitude="124.651004">Centrio</a>
					    </li>
					    <li>
						    <form id="addressForm">
							    <label for="address">Add marker by address</label>
							    <input type="text" name="address" style="width: 180px"/>
						    </form>
					    </li>
				    </ul>
			    </div>
		    </div>
		    <div id="map-panel">
			    <div id="map-canvas"></div>
		    </div>
	    </div>
    </body>
</html>